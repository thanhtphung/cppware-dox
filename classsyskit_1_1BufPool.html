<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>c++ gallery: syskit::BufPool Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">c++ gallery
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classsyskit_1_1BufPool.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classsyskit_1_1BufPool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">syskit::BufPool Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>pool of small-sized buffers  
 <a href="classsyskit_1_1BufPool.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="BufPool_8hpp_source.html">syskit/BufPool.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsyskit_1_1BufPool_1_1Stat.html">Stat</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">buffer pool stats  <a href="classsyskit_1_1BufPool_1_1Stat.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a23e988cd122ece7337a0db91ba219302"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a23e988cd122ece7337a0db91ba219302"></a>enum &#160;</td><td class="memItemRight" valign="bottom">{ <b>MaxBufSize</b> = 128 * sizeof(void*)
 }</td></tr>
<tr class="separator:a23e988cd122ece7337a0db91ba219302"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a24c7073e64c279e78ada2a595444c956"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsyskit_1_1BufPool.html#a24c7073e64c279e78ada2a595444c956">BufPool</a> (const char *config=0)</td></tr>
<tr class="separator:a24c7073e64c279e78ada2a595444c956"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81c3c70973f2cdd252ad0ee040a19f76"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsyskit_1_1BufPool.html#a81c3c70973f2cdd252ad0ee040a19f76">free</a> (const void *buf, unsigned int bufSize)</td></tr>
<tr class="separator:a81c3c70973f2cdd252ad0ee040a19f76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8e418f46ebf8f6c5945f7e6500c90bc"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsyskit_1_1BufPool.html#ad8e418f46ebf8f6c5945f7e6500c90bc">allocate</a> (unsigned int bufSize)</td></tr>
<tr class="separator:ad8e418f46ebf8f6c5945f7e6500c90bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abda413f3a5f7ffcd329489ed83eef2cd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abda413f3a5f7ffcd329489ed83eef2cd"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>shrink</b> ()</td></tr>
<tr class="separator:abda413f3a5f7ffcd329489ed83eef2cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a6dc6f5ce73583238173c3e42870103"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5a6dc6f5ce73583238173c3e42870103"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>shrinkArena</b> (unsigned int bufSize)</td></tr>
<tr class="separator:a5a6dc6f5ce73583238173c3e42870103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada82f2ca09def13e9212c3e4cab2461a"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsyskit_1_1BufPool.html#ada82f2ca09def13e9212c3e4cab2461a">maxBufSize</a> () const </td></tr>
<tr class="separator:ada82f2ca09def13e9212c3e4cab2461a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a7a4ab2429d7688648f71d77f939da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsyskit_1_1BufPool.html#a01a7a4ab2429d7688648f71d77f939da">resetStat</a> ()</td></tr>
<tr class="separator:a01a7a4ab2429d7688648f71d77f939da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5ead589d215d0a097bac12d2abb54972"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classsyskit_1_1BufPool.html">BufPool</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsyskit_1_1BufPool.html#a5ead589d215d0a097bac12d2abb54972">instance</a> ()</td></tr>
<tr class="separator:a5ead589d215d0a097bac12d2abb54972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3a3116b44bea3e2a48d2dac20310fdc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac3a3116b44bea3e2a48d2dac20310fdc"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>freeBuf</b> (const void *p, size_t size)</td></tr>
<tr class="separator:ac3a3116b44bea3e2a48d2dac20310fdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad234cc6bd16d692558e217db86ce08e1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad234cc6bd16d692558e217db86ce08e1"></a>
static void *&#160;</td><td class="memItemRight" valign="bottom"><b>allocateBuf</b> (size_t size)</td></tr>
<tr class="separator:ad234cc6bd16d692558e217db86ce08e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>pool of small-sized buffers </p>
<p>A class representing a pool of small-sized buffers. Small-sized buffers are allocated in bulk. Each pool can be used to produce and recycle buffers of small sizes (up to MaxBufSize). Buffers are managed using the <a class="el" href="classsyskit_1_1BufPool.html#ad8e418f46ebf8f6c5945f7e6500c90bc">allocate()</a> and <a class="el" href="classsyskit_1_1BufPool.html#a81c3c70973f2cdd252ad0ee040a19f76">free()</a> methods. Buffers are allocated in a least-recently-used manner. </p>

<p>Definition at line <a class="el" href="BufPool_8hpp_source.html#l00024">24</a> of file <a class="el" href="BufPool_8hpp_source.html">BufPool.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a24c7073e64c279e78ada2a595444c956"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">syskit::BufPool::BufPool </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>config</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct a buffer pool given its configuration. The configuration is a string of triplets delimited by a semicolon. Each triplet is a string delimited by a colon. Each triplet contains characteristics of an individual buffer arena, namely 1) buffer size, 2) initial capacity, and 3) the growth factor. Triplets with invalid or duplicate buffer sizes are ignored. For example, the "4:256:256;128:0:32;" configuration string specifies two buffer arenas. The first one has buffer size 4 and initial capacity of 256 buffers, and it grows linearly by 256 buffers as needed. The second one has buffer size 128 and initial capacity of zero, and it grows by 32 buffers as needed. A special configuration of "0:0:0;" can be used to disable the buffer pool. For a disabled pool, buffers come from the default c++ heap. </p>

<p>Definition at line <a class="el" href="BufPool_8cpp_source.html#l00039">39</a> of file <a class="el" href="BufPool_8cpp_source.html">BufPool.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad8e418f46ebf8f6c5945f7e6500c90bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * syskit::BufPool::allocate </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bufSize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate a buffer of given size. Return its address. Return zero if none. The default c++ heap is used if buffer size is not in the small-size range (1..MaxBufSize). </p>

<p>Definition at line <a class="el" href="BufPool_8cpp_source.html#l00255">255</a> of file <a class="el" href="BufPool_8cpp_source.html">BufPool.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a81c3c70973f2cdd252ad0ee040a19f76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool syskit::BufPool::free </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bufSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free a buffer. Result is unpredictable if given buffer address/size is invalid. Return true if successful. The default c++ heap is used if buffer size is not in the small-size range (1..MaxBufSize). </p>

<p>Definition at line <a class="el" href="BufPool_8cpp_source.html#l00091">91</a> of file <a class="el" href="BufPool_8cpp_source.html">BufPool.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5ead589d215d0a097bac12d2abb54972"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsyskit_1_1BufPool.html">BufPool</a> &amp; syskit::BufPool::instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the per-process singleton. The singleton is a default buffer pool. This pool is intended to be used mainly by the syskit library internals. However, use by application code is not prohibited. The method can be safely used in static data. </p>

<p>Definition at line <a class="el" href="BufPool_8cpp_source.html#l00073">73</a> of file <a class="el" href="BufPool_8cpp_source.html">BufPool.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ada82f2ca09def13e9212c3e4cab2461a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int syskit::BufPool::maxBufSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the effective maximum buffer size in bytes. By default, this is the same as MaxBufSize. For a disabled buffer pool which uses buffers from the default c++ heap, this value is zero. </p>

<p>Definition at line <a class="el" href="BufPool_8hpp_source.html#l00107">107</a> of file <a class="el" href="BufPool_8hpp_source.html">BufPool.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a01a7a4ab2429d7688648f71d77f939da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void syskit::BufPool::resetStat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset stats. </p>

<p>Definition at line <a class="el" href="BufPool_8cpp_source.html#l00240">240</a> of file <a class="el" href="BufPool_8cpp_source.html">BufPool.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>syskit/<a class="el" href="BufPool_8hpp_source.html">BufPool.hpp</a></li>
<li>syskit/<a class="el" href="BufPool_8cpp_source.html">BufPool.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesyskit.html">syskit</a></li><li class="navelem"><a class="el" href="classsyskit_1_1BufPool.html">BufPool</a></li>
    <li class="footer">Generated on Wed Aug 6 2014 08:15:59 for c++ gallery by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
